# 博客项目_ API 接口文档

## 1.1 API 接口说明

### 1.1.1 概述

+ 接口基准地址：`http://127.0.0.1:5050/blog`

+ 服务端已开启 CORS 跨域支持

+ API 认证统一使用 Token 认证

+ 需要授权的 API ，必须在请求头中使用 `Authorization` 字段提供 `token` 令牌

+ 使用 HTTP Status Code 标识状态

+ 数据返回格式统一使用 JSON

  ​    

### 1.1.2 支持的请求方法

- GET（SELECT）：从服务器取出资源（一项或多项）。

- POST（CREATE）：在服务器新建一个资源。

- PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。

- PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。

- DELETE（DELETE）：从服务器删除资源。

- HEAD：获取资源的元数据。

- OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。

  ​    

### 1.1.3 通用返回状态说明

| *状态码* | *含义*                | *说明*                                              |
| -------- | --------------------- | --------------------------------------------------- |
| 200      | OK                    | 请求成功                                            |
| 201      | CREATED               | 创建成功                                            |
| 204      | DELETED               | 删除成功                                            |
| 400      | BAD REQUEST           | 请求的地址不存在或者包含不支持的参数                |
| 401      | UNAUTHORIZED          | 未授权                                              |
| 403      | FORBIDDEN             | 被禁止访问                                          |
| 404      | NOT FOUND             | 请求的资源不存在                                    |
| 422      | Unprocesable entity   | [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误 |
| 500      | INTERNAL SERVER ERROR | 内部错误                                            |





## 1.2 登录

### 1.2.1 登录验证接口

- 请求路径：login
- 请求方法：post
- 测试数据：userName=admin password=123456



**请求参数**

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| userName | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

**响应参数**

| 参数名   | 参数说明       | 备注             |
| -------- | -------------- | ---------------- |
| id       | 数据库自增长ID |                  |
| password | 用户密码       | 经过加密后的密码 |
| account  | 用户名         |                  |
| token    | 用户身份校验   | 基于JWT令牌      |



**响应数据**

```json
{
    "data": {
      	"id": 1,
        "account": "admin",
        "password": "$10$3ZIZ2ajjm78UB2k1z6a.D.vohHLd3ewZXv7kHRwe/It3q5RRer0Pu",
        "token": "0caab02a996193daf9dd612043157e68cbcee408"
    },
    "meta": {
        "msg": "登录成功",
        "status": 200
    }
}
/* 错误实例 */
{
    "meta": {
        "errMsg": "没有权限，请登录 ！",
        "status": "401"
    }
}
```









## 1.3 注册

### 1.3.1 注册接口

- 请求路径：`/register`

- 请求方法：`post`

- **请求参数**

    | 参数名   | 参数说明 | 备注 |
    | -------- | -------- | ---- |
    | userName | 用户名   |      |
    | password | 密码     |      |
    


-  **响应参数**

    | 参数名   | 参数说明                   | 备注 |
    | -------- | -------------------------- | ---- |
    | id       | 用户id，数据库的自增id     |      |
    | userName | 注册成功的用户名           |      |
    | pass     | 注册成功后，经过加密的密码 |      |

    

- **响应数据**

    - ```json
        {
            "data": {
                "id": 4,
                "userName": "sss",
                "pass":"$2a$10$wQ.Jm0nJyN/zfq4ifUQyaeNkjlvoP85W9sH..v8CWwuFS75pAivFC"
            },
            "meta": {
                "msg": "注册成功!",
                "status": 200
            }
        }
        
        // 响应失败的数据格式
        {
            "meta": {
                "errMsg": "用户名已存在，请尝试其他的用户名",
                "status": 401
            }
        }
        ```

        







## 1.4 文章管理

### 1.4.1 文章列表_查询

+ 请求路径: `/home`
+ 请求方法: `get`

**请求参数**

| 参数名 | 参数说明 | 备注 |
| ------ | -------- | ---- |
|        |          |      |



**响应参数**

| 参数名      | 参数说明       |
| ----------- | -------------- |
| id          | 数据库自增长ID |
| user_id     | 用户id         |
| title       | 文章标题       |
| content     | 文章内容       |
| create_time | 创建时间       |
|             |                |

**响应数据**

```json
{
    "data": [
        {
            "id": 1,
            "user_id": 1,
            "title": "邂逅Node",
            "content": "Node是一个运行JS的环境",
            "create_time": "2020-12-28T12:11:16.000Z"
        }
    ],
    "meta": {
        "msg": "获取成功",
        "status": 200
    }
}
```







### 1.4.2 文章_删除

+ 请求路径: `/article/:id`
+ 请求方法: `delete`

**请求参数**

| 参数名 | 参数描述 | 备注                        |
| ------ | -------- | --------------------------- |
| id     | 文章id   | 不能为空，参数是**URL参数** |

**响应参数**

| 参数名 | 参数说明 | 备注 |
| ------ | -------- | ---- |
|        |          |      |

**响应数据**

```json
{
    "data": null,
    "meta": {
        "msg": "删除成功",
        "status": 200
    }
}

/* 响应失败的数据格式*/
{
    "meta": {
        "status": 401,
        "msg": "删除文章失败！"
    }
}
```







### 1.4.3 文章_新增

+ 请求路径: `/article`
+ 请求方法: `post`    

**请求参数**

| 参数名  | 参数说明 | 备注 |
| ------- | -------- | ---- |
| title   | 文章标题 | 必填 |
| content | 文章内容 | 必填 |



**响应参数**

| 参数名  | 参数说明 | 备注 |
| ------- | -------- | ---- |
| id      | 文章id   |      |
| user_id | 作者id   |      |
| title   | 文章标题 |      |
| content | 文章内容 |      |
| time    | 创建时间 |      |



**响应数据**

```json
{
    "data": {
        "id": 13,
        "user_id": 1,
        "title": "Vue",
        "content": "Vue是一个渐进式前端框架",
        "time": "2020-12-29 15:29:22"
    },
    "meta": {
        "msg": "新增文章成功!",
        "status": 200
    }
}
/* 响应失败的数据格式*/
{
    "meta": {
        "status": "401",
        "msg": "新增文章失败"
    },
}
```





### 1.4.4 文章_根据文章id查询

+ 请求路径: `/article/:id`
+ 请求方法: `get`    

- **请求参数**

    | 参数名 | 参数说明            | 备注 |
    | ------ | ------------------- | ---- |
    | id     | 文章id，URL地址参数 | 必填 |

    

    **响应参数**

    | 参数名      | 参数说明 | 备注 |
    | ----------- | -------- | ---- |
    | id          | 文章id   |      |
    | user_id     | 作者id   |      |
    | title       | 文章标题 |      |
    | content     | 文章内容 |      |
    | create_time | 创建时间 |      |

    

    **响应数据**

    ```json
    {
        "data": [
            {
                "id": 1,
                "user_id": 1,
                "title": "邂逅Vue",
                "content": "Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐...",
                "create_time": "2020-12-29T07:55:24.000Z"
            }
        ],
        "meta": {
            "msg": "查询成功",
            "status": 200
        }
    }
    ```

    





### 1.4.5 文章_修改

- 请求路径: `/article/:id`
- 请求方法: `put`    

- **请求参数**

    | 参数名  | 参数说明            | 备注 |
    | ------- | ------------------- | ---- |
    | id      | 文章id，URL地址参数 | 必填 |
    | title   | 文章标题            | 必填 |
    | content | 文章内容            | 必填 |

    >注：**put发送网络请求**携带的**参数**放在**body请求体**当中，和**post方式一样**
    >

    

    **响应参数**

    | 参数名  | 参数说明 | 备注 |
    | ------- | -------- | ---- |
    | id      | 文章id   |      |
    | title   | 文章标题 |      |
    | content | 文章内容 |      |

    

    

    **响应数据**

    ```json
    {
        "data": {
            "id": "9",
            "title": "zzz",
            "content": "zzzzzzzzzzzzzzzz"
        },
        "meta": {
            "msg": "编辑文章成功！",
            "status": 200
        }
    }
    ```

    







### 1.4.6 文章_根据关键字查询文章

- 请求路径： `/article/key`

- 请求方式： `post`

- **请求参数**

    | 参数名 | 参数说明         | 备注 |
    | ------ | ---------------- | ---- |
    | key    | 文章内容的关键字 | 必填 |

    

- **响应参数**

    | 参数名      | 参数说明     | 备注 |
    | ----------- | ------------ | ---- |
    | id          | 文章id       |      |
    | user_id     | 作者id       |      |
    | title       | 文章标题     |      |
    | content     | 文章内容     |      |
    | create_time | 文章创建时间 |      |

    

- **响应数据**

    - ```json
        {
            "data": [
                {
                    "id": 2,
                    "user_id": 1,
                    "title": "Node",
                    "content": "简单的说 Node.js 就是运行在服务端的 JavaScript..",
                    "create_time": "2020-12-29T07:59:52.000Z"
                },
                {
                    "id": 8,
                    "user_id": 1,
                    "title": "我有一个梦想",
                    "content": "123213222",
                    "create_time": "2020-12-29T09:57:55.000Z"
                }
            ],
            "meta": {
                "msg": "查询成功",
                "status": 200
            }
        }
        ```

        





